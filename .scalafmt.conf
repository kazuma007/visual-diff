version = 3.8.3

runner.dialect = scala3

# Maximum column width
maxColumn = 120

# Trailing commas for better diffs
trailingCommas = always

# Alignment settings - align common operators
align.preset = none
align.tokens."+" = [
  { code = ":=", owner = "Term.ApplyInfix" },
  { code = "+=", owner = "Term.ApplyInfix" },
  { code = "++=", owner = "Term.ApplyInfix" }
]

# Newlines configuration
newlines.topLevelBodyIfMinStatements = [before,after]
newlines.topLevelBodyMinStatements = 1
newlines.avoidForSimpleOverflow = [slc, tooLong]
newlines.topLevelStatementBlankLines = [
  { blanks = 1, minBreaks = 0, regex = "^(?!((Term\\.Apply)|(Defn\\.Object)))" }
]

# String interpolation
assumeStandardLibraryStripMargin = true

# Binary packing for literals
binPack.literalArgumentLists = true
binPack.literalsIncludeSimpleExpr = true
binPack.literalsExclude = ["Term.Name"]

# Documentation style
docstrings.style = "SpaceAsterisk"
docstrings.wrap = keep
docstrings.oneline = fold

# Rewrite rules for consistency
rewrite.rules = [
  AvoidInfix,
  RedundantBraces,
  RedundantParens,
  SortModifiers,
  PreferCurlyFors,
  Imports
]

rewrite.redundantBraces.maxLines = 1
rewrite.redundantBraces.stringInterpolation = true
rewrite.imports.expand = true

# Avoid ASCII tokens
rewriteTokens = {
  "⇒": "=>"
  "→": "->"
  "←": "<-"
}

# Select chains
includeCurlyBraceInSelectChains = false

# Include markdown files
project.includePaths = ["glob:**.scala", "glob:**.sbt", "glob:**.sc", "glob:**.md"]
project.excludePaths = ["glob:**metals.sbt"]
